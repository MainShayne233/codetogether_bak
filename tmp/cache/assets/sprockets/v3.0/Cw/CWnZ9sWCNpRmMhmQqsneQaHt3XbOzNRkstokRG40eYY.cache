I"ó(function() {
  var ready;

  ready = function() {
    var codeMirror;
    codeMirror = CodeMirror.fromTextArea($('.code').get(0), {
      lineNumbers: true,
      mode: "text/x-ruby"
    });
    return codeMirror.on('change', function(event) {
      var content, id, user_id;
      console.log(event.getTextArea);
      id = $('.code_container').attr('id');
      content = $(event.target).val();
      user_id = $('input.user').attr('id');
      $.ajax({
        type: 'PATCH',
        url: '/whiteboards/' + id,
        data: {
          content: content
        },
        datatype: 'JSON'
      });
      return App.coderoom.type(id, content, user_id);
    });
  };

  $(document).ready(ready);

  $(document).on('page:load', ready);

}).call(this);
:ET